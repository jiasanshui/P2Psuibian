<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>p2p网贷平台</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<link href="../css/common.css" rel="stylesheet" />
<link href="../css/register.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="../script/jquery.min.js"></script>
<script type="text/javascript" src="../script/common.js"></script>
<!--<script src="../script/login.js" type="text/javascript"></script>-->
  <style type="text/css">
    #checkNode{
      background-image: url(../images/yzm6.jpg);/*验证码的背景图 */
      font-family: Arial;
      font-style: italic;
      font-size: 140%;
      color: black;
      border: 0;
      padding:2px 3px;
      letter-spacing: 3px;
      width: 70px;
      height: 40px;
      font-weight: bolder;
      text-align: center;
    }
  </style>
</head>
<body onload="createCode()">
<header>
  <div class="header-top min-width">
    <div class="container fn-clear"> <strong class="fn-left">咨询热线：400-668-6698<span class="s-time">服务时间：9:00 - 18:00</span></strong>
      <ul class="header_contact">
        <li class="c_1"> <a class="ico_head_weixin" id="wx"></a>
          <div class="ceng" id="weixin_xlgz" style="display: none;">
            <div class="cnr"> <img src="../images/code.png"> </div>
            <b class="ar_up ar_top"></b> <b class="ar_up_in ar_top_in"></b> </div>
        </li>
        <li class="c_2"><a href="#" target="_blank" title="官方QQ" alt="官方QQ"><b class="ico_head_QQ"></b></a></li>
        <li class="c_4"><a href="#" target="_blank" title="新浪微博" alt="新浪微博"><b class="ico_head_sina"></b></a></li>
      </ul>
      <ul class="fn-right header-top-ul">
        <li> <a href="/jump/index" class="app">返回首页</a> </li>
        <li>
          <div class=""><a href="/jump/register" class="c-orange" title="免费注册">免费注册</a></div>
        </li>
        <li>
          <div class=""><a href="/jump/login" class="js-login" title="登录">登录</a></div>
        </li>
      </ul>
    </div>
  </div>
  <div class="header min-width">
    <div class="container">
      <div class="fn-left logo"> <a class="" href="/jump/index"> <img src="../images/logo.jpg"  title=""> </a> </div>
      <ul class="top-nav fn-clear">
        <li> <a href="/jump/index">首页</a> </li>
        <li> <a href="/jump/list" class="">我要投资</a> </li>
        <li> <a href="/jump/borrow" class="">我要借款</a> </li>
        <li> <a href="/jump/help">安全保障</a> </li>
        <li class="top-nav-safe"> <a href="/jump/personal">我的账户</a> </li>
        <li> <a href="/jump/about">关于我们</a> </li>
      </ul>
    </div>
  </div>
</header>
<!--注册-->
<div class="wrap">
  <div class="tdbModule register">
    <div class="registerTitle">注册账户</div>
    <div class="registerLc1">
      <p class="p1">填写账户信息</p>
      <p class="p2">验证手机信息</p>
      <p class="p3">注册成功</p>
    </div>
    <div class="registerCont">
      <form  method="post">
        <ul>
        <li><span class="dis">用户名:</span>
          <input type="text" name="userName" id="userName" class="input _userName" maxlength="24" tabindex="1">
          <span id="userNameAlt" data-info="6-24个字符，字母开头，字母、数字下划线组成">6-10个字符，字母开头，字母、数字下划线组成</span></li>
        <li><span class="dis">密码:</span>
          <input type="password" name="password" id="password" class="input _password" maxlength="24" tabindex="1">
          <span id="passwordAlt" data-info="6-24个字符，英文、数字组成，区分大小写">6-24个字符，英文、数字组成，区分大小写</span></li>
        <li><span class="dis">确认密码:</span>
          <input type="password" name="repeatPassword" id="repeatPassword" class="input _repeatPassword" maxlength="24" tabindex="1">
          <span id="repeatPasswordAlt" data-info="请再次输入密码">请再次输入密码</span></li>

        <li> <span class="dis">验证码:</span>
          <input type="text" id="jpgVerify" class="input input1 _yanzhengma" name="yzm" maxlength="4" tabindex="1">
          <input type="text" id="checkNode" disabled="disabled"/>
          <a class="look blue _changeCapcherButton" id="look" href="javascript:void(0);" onclick="createCode()">看不清？换一张</a>
          <span class="info" id="jpgVerifys" data-info="请输入手机验证码"></span> </li>

        <li class="telNumber"> <span class="dis">手机号码:</span>
          <input type="text" class="input _phoneNum" id="phone" name="phone" tabindex="1" maxlength="11">
          <a href="javascript:void(0);" class="button radius1 _getkey" id="sendPhone">获取验证码</a> <span id="phoneJy" data-info="请输入您的常用电话">请输入您的常用电话</span></li>
        <li class="telNumber"><span class="dis">短信验证码:</span>
          <input id="phoneVerify" type="text" class="input input1  _phonVerify" data-_id="phonVerify" tabindex="1">
          <span class="info" id="phoneVerifys" data-info="请输入手机验证码">请输入手机验证码</span></li>
        <li class="agree">

        <li><span class="dis">可用邮箱:</span>
          <input type="text" name="email" id="email" class="input _email" maxlength="24" tabindex="1">
          <span id="emailAlt" data-info="请输入正确的邮箱">请输入正确的邮箱</span></li>

        <li class="agree">
        <input name="protocol" id="protocol" type="checkbox" value="" checked="checked">
          我同意《<a href="#" target="_black">你我贷注册协议</a>》 <span id="protocolAlt" data-info="请查看协议">请查看协议</span></li>
        <li class="btn"><input type="button" class="radius1" value="立即注册" id="submitBtn" ></li>
      </ul>
      </form>
    </div>
  </div>
</div>
<!--网站底部-->
<div id="footer" class="ft">
  <div class="ft-inner clearfix">
    <div class="ft-helper clearfix">
      <dl>
        <dt>关于我们</dt>
        <dd><a href="/jump/about">公司简介</a><a href="/jump/manage_team">管理团队</a><a href="/jump/site_notice">网站公告</a></dd>
      </dl>
      <dl>
        <dt>相关业务</dt>
        <dd><a href="/jump/list">我要投资</a><a href="/jump/borrow">我要借款</a></dd>
      </dl>
      <dl>
        <dt>帮助中心</dt>
        <dd><a href="/jump/help">新手入门</a><a href="/jump/personal">我的账户</a></dd>
      </dl>
      <dl>
        <dt>联系我们</dt>
        <dd><a href="/jump/contact">联系我们</a></dd>
      </dl>
    </div>
    <div class="ft-service">
      <dl>
        <dd>
          <p><strong>400-660-1268</strong><br>
            工作日 9:00-22:00<br>
            官方交流群:<em>12345678</em><br>
            工作日 9:00-22:00 / 周六 9:00-18:00<br>
          </p>
          <div class="ft-serv-handle clearfix"><a class="icon-hdSprite icon-ft-sina a-move a-moveHover" title="你我贷新浪微博" target="_blank" href="#"></a><a class="icon-hdSprite icon-ft-qqweibo a-move a-moveHover" title="你我贷腾讯微博" target="_blank" href="#"></a><a class="icon-ft-qun a-move a-moveHover" title="你我贷QQ群" target="_blank" href="#"></a><a class="icon-hdSprite icon-ft-email a-move a-moveHover mrn" title="阳光易贷email" target="_blank" href="mailto:xz@yirenbao.com"></a></div>
        </dd>
      </dl>
    </div>
    <div class="ft-wap clearfix">
      <dl>
        <dt>官方二维码</dt>
        <dd><span class="icon-ft-erweima"><img src="../images/code.png" style="display: inline;"></span></dd>
      </dl>
    </div>
  </div>
  <div class="ft-record">
    <div class="ft-approve clearfix"><a class="icon-approve approve-0 fadeIn-2s" target="_blank" href="#"></a><a class="icon-approve approve-1 fadeIn-2s" target="_blank" href="#"></a><a class="icon-approve approve-2 fadeIn-2s" target="_blank" href="#"></a><a class="icon-approve approve-3 fadeIn-2s" target="_blank" href="#"></a></div>
    <div class="ft-identity">©2015 你我贷 All rights reserved&nbsp;&nbsp;&nbsp;<span class="color-e6">|</span>&nbsp;&nbsp;&nbsp;安徽省你我贷投资管理有限公司&nbsp;&nbsp;&nbsp;<span class="color-e6">|</span>&nbsp;&nbsp;&nbsp;<a target="_blank" href="http://www.miitbeian.gov.cn/">皖ICP备12345678号-1</a></div>
  </div>
</div>
<script type="text/javascript">
    window.onload=function(){
        createCode();
    }
    var code;/!*定义一个验证码的全局变量*!/
    function createCode(){/!* 生成验证码的函数 *!/
        code="";
        var codeLength=4;
        var checkCode=$("#checkNode");
        checkCode.value="";
        var selectChar=new Array(1,2,3,4,5,6,7,8,9,'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','x','y','z','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z');
        for(var i=0;i < codeLength;i++){
            var charIndex=Math.floor(Math.random()*61);
            code += selectChar[charIndex];
        }
        if (code.length != codeLength) {
            createCode();
        }
        $("#checkNode").val(code);
    }
    //验证图片验证码
    var flagJPG=0;
    $("#jpgVerify").blur(function(){
        var inputCode =document.getElementById("jpgVerify").value.toUpperCase();
        var codeToUp=code.toUpperCase();
        if(inputCode.length <= 0){
            $("#jpgVerifys").html("验证码不能为空").css("color","red");
        }else if(inputCode != codeToUp){
            $("#jpgVerifys").html("验证码输入错误").css("color","red");
        }else {
            $("#jpgVerifys").html("验证码输入正确").css("color","green");
            flagJPG=1;
        }
    });

    //验证用户名
    var flagU=0;
    $("#userName").blur(function(){
        //用户名验证的正则
        var uPattern=/^[a-zA-Z][a-zA-Z0-9]{5,23}$/;
        //用户名输入框的值
        var userName=$(this).val();
        //用户名的提示信息的span元素
        var userNameAlt=$("#userNameAlt");

        if(userName==null||userName==''){
            userNameAlt.html("用户名不能为空").css("color","red");
        }else if(userName.length < 6 || userName.length>24){
            userNameAlt.html("用户名必须是6-24位").css("color","red");
        }else if(!uPattern.test(userName)){
            userNameAlt.html("用户名6-24位，字母开头，字母、数字下划线组成").css("color","red");
        }else{
            $.post(
                "/register/findUsername",
                {"username":userName},
                function(data){
                    if(data.msg=="1"){
                        userNameAlt.html("用户名已存在").css("color","red");
                    }else{
                        flagU=1;
                        userNameAlt.html("用户名可用").css("color","green");
                    }
                },
                'json'
            );
        }
    });

    $("#userName").focus(function(){
        $("#userNameAlt").html("6-24个字符，字母开头，字母、数字下划线组成").css("color","#333333");
    });

    //验证密码
    var flagP=0;
    $("#password").blur(function(){
        //密码验证的正则
        var pPattern=/^[a-zA-Z0-9]{6,24}$/;
        //密码输入框的值
        var password=$(this).val();
        //密码的提示信息的span元素
        var passwordAlt=$("#passwordAlt");

        if(password==null||password==''){
            passwordAlt.html("密码不能为空").css("color","red");
        }else if(password.length < 6 ||password.length>24){
            passwordAlt.html("密码小于6位或者大于24位").css("color","red");
        }else if(!pPattern.test(password)){
            passwordAlt.html("密码必须是英文和数字组合").css("color","red");
        }else{
            flagP=1;
            passwordAlt.html("密码格式正确").css("color","green");
        }
    });

    $("#password").focus(function(){
        $("#passwordAlt").html("6-24个字符，英文、数字组成，区分大小写").css("color","#333333");
    });
    //确认密码
    var flagRP=0;
    $("#repeatPassword").blur(function(){
        if($("#repeatPassword").val()!=$("#password").val()){
            $("#repeatPasswordAlt").html("两次密码不一致").css("color","red");
        }else{
            flagRP=1;
            $("#repeatPasswordAlt").html("两次密码一致").css("color","green");
        }
    });

    //验证手机号
    var flagPH=0;
    $("#phone").blur(function(){
        //手机号验证的正则
        var phonePattern=/^1[3|5|7|8][0-9]{9}$/;
        //手机号输入框的值
        var phone=$(this).val();
        //手机号的提示信息的span元素
        var phoneJy=$("#phoneJy");
        if(phone==null||phone==''){
            phoneJy.html("手机号不能为空").css("color","red");
        }else if(!phonePattern.test(phone)){
            phoneJy.html("手机号格式不正确").css("color","red");
        }else{
            flagPH=1;
            phoneJy.html("手机号格式正确").css("color","green");
        }
    });
    //发送验证码
    var flagYZM=0;
    var timer=null;
    $("#sendPhone").click(function(){
        if(flagPH==0){
            return false;
        }
        if(timer==null){
            var count=60;
            $("#sendPhone").attr("disabled","disabled");
            timer=setInterval(function(){
                count--;
                $("#sendPhone").html("正在发送("+count+"s)");
                if(count==0){
                    clearInterval(timer);
                    timer=null;
                    $("#sendPhone").attr("disabled","true");
                    $("#sendPhone").html("重新发送");
                }
            },1000);
            $.post(
                "/register/sendPhoneCode",
                {"telephone":$("#phone").val()},
                function(data){
                    if(data.msg=="1"){
                        $("#phoneJy").html("手机号已被注册").css("color","red");
                        clearInterval(timer);
                        timer=null;
                        $("#sendPhone").attr("disabled","true");
                        $("#sendPhone").html("重新发送");
                    }else{
                        $("#phoneJy").html("手机号可以使用").css("color","green");
                        flagYZM=1;
                    }
                },
                'json'
            );
        }
    });

    //判断手机验证码是否正确
    var flagCODE=0;
    $("#phoneVerify").blur(function(){
        $.post(
            "/register/vfPhoneCode",
            {"code":$("#phoneVerify").val()},
            function(data){
                if(data.msg=="1"){
                    $("#phoneVerifys").html("验证成功").css("color","green");
                    flagCODE=1;
                }else{
                    $("#phoneVerifys").html("验证失败").css("color","red");
                }
            }
        );
    });

    //验证邮箱
    var flagE=0;
    $("#email").blur(function(){
        //邮箱验证的正则
        var emailPattern= /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
        //邮箱输入框的值
        var email=$(this).val();
        //邮箱的提示信息的span元素
        var emailAlt=$("#emailAlt");

        if(email==null||email==''){
            emailAlt.html("邮箱不能为空").css("color","red");
        }else if(!emailPattern.test(email)){
            emailAlt.html("邮箱格式不正确").css("color","red");
        }else{
            $.post(
                "/register/findUserByEmail",
                {"email":email},
                function(data){
                    if(data.msg=="1"){
                        emailAlt.html("邮箱已存在").css("color","red");
                    }else{
                        flagE=1;
                        emailAlt.html("邮箱可用").css("color","green");
                    }
                },
                'json'
            );
        }
    });

    //表单数据提交
    $("#submitBtn").click(function(){
        if(flagU!=1){
            alert('flagU');
            return false;
        }else if(flagP!=1){
            alert('flagP');
            return false;
        }else if(flagRP!=1){
            alert('flagRP');
            return false;
        }else if(flagJPG!=1){
            alert('flagJPG');
            return false;
        }else if(flagPH!=1){
            alert('flagPH');
            return false;
        }else if(flagYZM==1){
            alert('flagYZM');
            return false;
        }else if(flagE!=1){
            alert('flagE');
            return false;
        }else if(flagCODE==1){
            alert('flagCODE');
            return false;
        }else if($("#protocol").prop('checked')==false){
            alert("请同意《你我贷注册协议》！！");
            return false;
        }else{
            //alert(123);
            $.post(
                "/register/userRegister",
                {
                    "userName":$("#userName").val(),
                    "password":$("#password").val(),
                    "phone":$("#phone").val(),
                    "email":$("#email").val()
                },
                function(data){
                    if(data.msg=="1"){
                        location.href="/jump/register1?userName="+$("#userName").val();
                    }
                },
            'json'
            );
        }
    });
</script>
</body>
</html>
